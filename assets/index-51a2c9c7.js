var b=Object.defineProperty;var M=(d,g,t)=>g in d?b(d,g,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[g]=t;var h=(d,g,t)=>(M(d,typeof g!="symbol"?g+"":g,t),t);(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(i){if(i.ep)return;i.ep=!0;const u=t(i);fetch(i.href,u)}})();function L(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var P={exports:{}};(function(d){var g=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function i(a,n,o){this.fn=a,this.context=n,this.once=o||!1}function u(a,n,o,r,T){if(typeof o!="function")throw new TypeError("The listener must be a function");var E=new i(o,r||a,T),f=t?t+n:n;return a._events[f]?a._events[f].fn?a._events[f]=[a._events[f],E]:a._events[f].push(E):(a._events[f]=E,a._eventsCount++),a}function p(a,n){--a._eventsCount===0?a._events=new s:delete a._events[n]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var n=[],o,r;if(this._eventsCount===0)return n;for(r in o=this._events)g.call(o,r)&&n.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(o)):n},c.prototype.listeners=function(n){var o=t?t+n:n,r=this._events[o];if(!r)return[];if(r.fn)return[r.fn];for(var T=0,E=r.length,f=new Array(E);T<E;T++)f[T]=r[T].fn;return f},c.prototype.listenerCount=function(n){var o=t?t+n:n,r=this._events[o];return r?r.fn?1:r.length:0},c.prototype.emit=function(n,o,r,T,E,f){var O=t?t+n:n;if(!this._events[O])return!1;var l=this._events[O],R=arguments.length,A,m;if(l.fn){switch(l.once&&this.removeListener(n,l.fn,void 0,!0),R){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,o),!0;case 3:return l.fn.call(l.context,o,r),!0;case 4:return l.fn.call(l.context,o,r,T),!0;case 5:return l.fn.call(l.context,o,r,T,E),!0;case 6:return l.fn.call(l.context,o,r,T,E,f),!0}for(m=1,A=new Array(R-1);m<R;m++)A[m-1]=arguments[m];l.fn.apply(l.context,A)}else{var C=l.length,w;for(m=0;m<C;m++)switch(l[m].once&&this.removeListener(n,l[m].fn,void 0,!0),R){case 1:l[m].fn.call(l[m].context);break;case 2:l[m].fn.call(l[m].context,o);break;case 3:l[m].fn.call(l[m].context,o,r);break;case 4:l[m].fn.call(l[m].context,o,r,T);break;default:if(!A)for(w=1,A=new Array(R-1);w<R;w++)A[w-1]=arguments[w];l[m].fn.apply(l[m].context,A)}}return!0},c.prototype.on=function(n,o,r){return u(this,n,o,r,!1)},c.prototype.once=function(n,o,r){return u(this,n,o,r,!0)},c.prototype.removeListener=function(n,o,r,T){var E=t?t+n:n;if(!this._events[E])return this;if(!o)return p(this,E),this;var f=this._events[E];if(f.fn)f.fn===o&&(!T||f.once)&&(!r||f.context===r)&&p(this,E);else{for(var O=0,l=[],R=f.length;O<R;O++)(f[O].fn!==o||T&&!f[O].once||r&&f[O].context!==r)&&l.push(f[O]);l.length?this._events[E]=l.length===1?l[0]:l:p(this,E)}return this},c.prototype.removeAllListeners=function(n){var o;return n?(o=t?t+n:n,this._events[o]&&p(this,o)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,d.exports=c})(P);var I=P.exports;const y=L(I),D={DOWN:"down",UP:"up",CLICK:"click",DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",OVER:"over",OUT:"out",CONTROLS_ACTIVE:"controlsActive",CONTROLS_INACTIVE:"controlsInactive",CONTROL_RIGHT_UPDATE:"controlRightUpdate",CONTROL_LEFT_UPDATE:"controlLeftUpdate",CONTROL_TOP_UPDATE:"controlTopUpdate",CONTROL_BOTTOM_UPDATE:"controlBottomUpdate",RESIZE:"resize",RESIZE_START:"resizeStart",RESIZE_END:"resizeEnd",UPDATE:"update"},_={LEFT:"w-resize",RIGHT:"e-resize",TOP:"n-resize",BOTTOM:"s-resize",LEFT_TOP:"nw-resize",RIGHT_TOP:"ne-resize",LEFT_BOTTOM:"sw-resize",RIGHT_BOTTOM:"se-resize",OVER:"grab",DEFAULT:"default"},N={CONTROLS:"data-overdrag-controls",OVER:"data-overdrag-over",DOWN:"data-overdrag-down",DRAG:"data-overdrag-dragging",DRAG_MODE:"data-overdrag-drag-mode",RESIZE:"data-overdrag-resizing",RESIZE_MODE:"data-overdrag-resize-mode"},e=class extends y{constructor({element:t,minContentHeight:s=e.DEFAULTS.minContentHeight,minContentWidth:i=e.DEFAULTS.minContentWidth,maxContentWidth:u=e.DEFAULTS.maxContentWidth,maxContentHeight:p=e.DEFAULTS.maxContentHeight,snapThreshold:c=e.DEFAULTS.snapThreshold,controlsThreshold:a=e.DEFAULTS.controlsThreshold,clickDetectionThreshold:n=e.DEFAULTS.clickDetectionThreshold,stack:o=e.DEFAULTS.stack,excludePadding:r=e.DEFAULTS.excludePadding}){super();h(this,"window",window);h(this,"element");h(this,"parentElement");h(this,"snapThreshold");h(this,"controlsThreshold");h(this,"minContentHeight");h(this,"minContentWidth");h(this,"maxContentWidth");h(this,"maxContentHeight");h(this,"clickDetectionThreshold");h(this,"controlsActive",!1);h(this,"over",!1);h(this,"dragging",!1);h(this,"resizing",!1);h(this,"down",!1);h(this,"parentMouseX",0);h(this,"parentMouseY",0);h(this,"offsetX",0);h(this,"offsetY",0);h(this,"position");h(this,"downPosition");h(this,"parentPosition");h(this,"stack");h(this,"excludePadding");h(this,"controls",{left:!1,right:!1,top:!1,bottom:!1});h(this,"downMouseX",0);h(this,"downMouseY",0);h(this,"onMouseOver",(t,s=!1)=>{var i;this.over||e.activeInstance&&e.activeInstance!==this||(!this.stack&&!s&&((i=e.__ENGAGED_STACK__.at(-1))==null||i.onMouseOut(t,!0),e.__ENGAGED_STACK__.push(this)),this.setOverState(!0),this.element.addEventListener("mouseleave",this.onMouseOut),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mousedown",this.onMouseDown))});h(this,"onMouseOut",(t,s=!1)=>{var i;this.over&&(this.element.removeEventListener("mouseleave",this.onMouseOut),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mousedown",this.onMouseDown),this.setOverState(!1),this.resetControlPoints(),!this.stack&&!s&&(e.__ENGAGED_STACK__.pop(),(i=e.__ENGAGED_STACK__.at(-1))==null||i.onMouseOver(t,!0)))});h(this,"onMouseDown",t=>{t.preventDefault(),this.element.removeEventListener("mouseleave",this.onMouseOut),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("mouseenter",this.onMouseOver),this.down=!0,e.activeInstance=this,this.downPosition={...this.position,fullBounds:{...this.position.fullBounds},borders:{...this.position.borders},margins:{...this.position.margins},paddings:{...this.position.paddings},visualBounds:{...this.position.visualBounds}},this.offsetX=this.parentMouseX-this.position.fullBounds.left,this.offsetY=this.parentMouseY-this.position.fullBounds.top,this.downMouseX=this.parentMouseX,this.downMouseY=this.parentMouseY,this.dragging=!this.controlsActive,this.resizing=this.controlsActive,this.element.setAttribute(e.ATTRIBUTES.DOWN,""),this.emit(e.EVENTS.DOWN,this),this.dragging?(this.element.setAttribute(e.ATTRIBUTES.DRAG_MODE,""),this.emit(e.EVENTS.DRAG_START,this)):this.resizing&&(this.element.setAttribute(e.ATTRIBUTES.RESIZE_MODE,""),this.emit(e.EVENTS.RESIZE_START,this)),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseup",this.onMouseUp)});h(this,"onMouseUp",t=>{this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mouseleave",this.onMouseOut),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mousedown",this.onMouseDown),this.element.addEventListener("mouseenter",this.onMouseOver),t.preventDefault(),e.activeInstance=null,this.down=!1,this.dragging?(this.element.removeAttribute(e.ATTRIBUTES.DRAG_MODE),this.emit(e.EVENTS.DRAG_END,this)):this.resizing&&(this.element.removeAttribute(e.ATTRIBUTES.RESIZE_MODE),this.emit(e.EVENTS.RESIZE_END,this)),this.dragging=!1,this.resizing=!1,this.element.removeAttribute(e.ATTRIBUTES.DOWN),this.element.removeAttribute(e.ATTRIBUTES.DRAG),this.element.removeAttribute(e.ATTRIBUTES.RESIZE),this.emit(e.EVENTS.UP,this),this.isClick()&&this.emit(e.EVENTS.CLICK,this)});h(this,"onMouseMove",t=>{this.parentPosition=this.getComputedParentPosition(),this.position=this.getComputedElementPosition(),this.parentMouseX=t.clientX-this.parentPosition.offsetLeft,this.parentMouseY=t.clientY-this.parentPosition.offsetTop,this.down?this.dragging?this.drag():this.reSize():(this.updateControlPointsState(),this.updateCursorStyle())});if(this.minContentHeight=s,this.minContentWidth=i,this.maxContentWidth=u,this.maxContentHeight=p,this.snapThreshold=c,this.controlsThreshold=a,this.excludePadding=r,this.element=t,this.element.style.position="absolute",this.stack=o,this.element.__overdrag=this,this.clickDetectionThreshold=n,!this.element.offsetParent)throw new Error(e.ERROR.NO_PARENT);this.parentElement=this.element.offsetParent,this.element.addEventListener("mouseenter",this.onMouseOver),this.parentPosition=this.getComputedParentPosition(),this.position=this.getComputedElementPosition(),this.downPosition=this.position,this.assignInitialStyles()}assignInitialStyles(){this.element.style.left=`${this.position.fullBounds.left}px`,this.element.style.top=`${this.position.fullBounds.top}px`,this.element.style.width=`${this.position.width}px`,this.element.style.height=`${this.position.height}px`,this.element.style.right=`${this.parentPosition.actionBounds.right-this.position.fullBounds.right}px`,this.element.style.bottom=`${this.parentPosition.actionBounds.bottom-this.position.fullBounds.bottom}px`,this.element.setAttribute("width",`${this.position.width}`),this.element.setAttribute("height",`${this.position.height}`)}_getInt(t){return parseInt(t||"0")}emit(t,...s){return super.emit.apply(this,[e.EVENTS.UPDATE,this]),super.emit.apply(this,[t,...s])}getComputedParentPosition(){const t=this.parentElement.getBoundingClientRect(),s=getComputedStyle(this.parentElement),i=this.excludePadding?{top:0,right:0,bottom:0,left:0}:{top:this._getInt(s.paddingTop),right:this._getInt(s.paddingRight),bottom:this._getInt(s.paddingBottom),left:this._getInt(s.paddingLeft)},u=this._getInt(s.width),p=this._getInt(s.height);return{actionBounds:{top:i.top,left:i.left,right:u+i.left,bottom:p+i.top,width:u+i.left+i.right,height:p+i.top+i.bottom},offsetLeft:t.left+this._getInt(s.borderLeftWidth),offsetTop:t.top+this._getInt(s.borderTopWidth)}}getComputedElementPosition(){const t=getComputedStyle(this.element),s={top:this._getInt(t.marginTop),right:this._getInt(t.marginRight),bottom:this._getInt(t.marginBottom),left:this._getInt(t.marginLeft)},i={top:this._getInt(t.borderTopWidth),right:this._getInt(t.borderRightWidth),bottom:this._getInt(t.borderBottomWidth),left:this._getInt(t.borderLeftWidth)},u={top:this._getInt(t.paddingTop),right:this._getInt(t.paddingRight),bottom:this._getInt(t.paddingBottom),left:this._getInt(t.paddingLeft)},p=this._getInt(t.top),c=this._getInt(t.left),a=this._getInt(t.width),n=this._getInt(t.height),o={width:a+i.right+i.left+u.right+u.left,height:n+i.top+i.bottom+u.top+u.bottom,left:c+s.left,top:p+s.top},r=o.width+s.right+s.left,T=o.height+s.top+s.bottom,E={width:r,height:T,left:c,top:p,right:c+r,bottom:p+T};return{width:a,height:n,verticalDiff:T-n,horizontalDiff:r-a,visualBounds:{...o,right:o.left+o.width,bottom:o.top+o.height},fullBounds:E,margins:s,borders:i,paddings:u}}isClick(){return Math.abs(this.parentMouseX-this.downMouseX)<this.clickDetectionThreshold&&Math.abs(this.parentMouseY-this.downMouseY)<this.clickDetectionThreshold}setOverState(t){this.over=t,t?(this.element.setAttribute(e.ATTRIBUTES.OVER,""),this.emit(e.EVENTS.OVER,this)):(this.element.removeAttribute(e.ATTRIBUTES.OVER),this.emit(e.EVENTS.OUT,this))}resetControlPoints(){const t=this.controlsActive;this.controlsActive=this.controls.left=this.controls.right=this.controls.top=this.controls.bottom=!1,t!==this.controlsActive&&(this.element.removeAttribute(e.ATTRIBUTES.CONTROLS),this.emit(e.EVENTS.CONTROLS_INACTIVE,this))}updateControlPointsState(){const t=JSON.stringify(this.controls),s=this.parentMouseY>=this.position.visualBounds.top&&this.parentMouseY<=this.position.visualBounds.bottom,i=this.parentMouseX>=this.position.visualBounds.left&&this.parentMouseX<=this.position.visualBounds.right,u=this.parentMouseX-this.position.visualBounds.left,p=this.position.visualBounds.right-this.parentMouseX,c=this.parentMouseY-this.position.visualBounds.top,a=this.position.visualBounds.bottom-this.parentMouseY;this.controls.left=s&&u>=0&&u<=this.controlsThreshold,this.controls.right=s&&p>=0&&p<=this.controlsThreshold,this.controls.top=i&&c>=0&&c<=this.controlsThreshold,this.controls.bottom=i&&a>=0&&a<=this.controlsThreshold;const n=this.controls.left||this.controls.right||this.controls.top||this.controls.bottom;n&&t!==JSON.stringify(this.controls)?(this.controlsActive=!0,this.element.setAttribute(e.ATTRIBUTES.CONTROLS,Object.keys(this.controls).filter(o=>this.controls[o]).join("-")),this.emit(e.EVENTS.CONTROLS_ACTIVE,this)):n||this.resetControlPoints()}updateCursorStyle(){let t=null;this.controls.top&&this.controls.left?t=e.CURSOR.LEFT_TOP:this.controls.bottom&&this.controls.right?t=e.CURSOR.RIGHT_BOTTOM:this.controls.bottom&&this.controls.left?t=e.CURSOR.LEFT_BOTTOM:this.controls.top&&this.controls.right?t=e.CURSOR.RIGHT_TOP:this.controls.top?t=e.CURSOR.TOP:this.controls.bottom?t=e.CURSOR.BOTTOM:this.controls.left?t=e.CURSOR.LEFT:this.controls.right?t=e.CURSOR.RIGHT:this.over&&(t=e.CURSOR.OVER),this.element.style.setProperty("cursor",t)}reSize(){let t=!1;this.controls.top&&(t=this.movePointTop()||t),this.controls.bottom&&(t=this.movePointBottom()||t),this.controls.left&&(t=this.movePointLeft()||t),this.controls.right&&(t=this.movePointRight()||t),t&&(this.element.setAttribute(e.ATTRIBUTES.RESIZE,""),this.emit(e.EVENTS.RESIZE,this))}assignStyle(t){const s={top:this.position.fullBounds.top,left:this.position.fullBounds.left,width:this.position.width,height:this.position.height,...t};this.element.style.left=`${s.left}px`,this.element.style.top=`${s.top}px`,this.element.style.width=`${s.width}px`,this.element.style.height=`${s.height}px`,this.element.setAttribute("width",`${s.width}`),this.element.setAttribute("height",`${s.height}`),this.position=this.getComputedElementPosition(),this.element.style.right=`${this.parentPosition.actionBounds.right-this.position.fullBounds.right}px`,this.element.style.bottom=`${this.parentPosition.actionBounds.bottom-this.position.fullBounds.bottom}px`}movePointRight(){const t=Math.max(this.minContentWidth,Math.min(this.maxContentWidth,this.calcRight()-this.downPosition.fullBounds.left-this.position.horizontalDiff));return t!==this.position.width?(this.assignStyle({width:t}),this.emit(e.EVENTS.CONTROL_RIGHT_UPDATE,this),!0):!1}movePointBottom(){const t=Math.max(this.minContentHeight,Math.min(this.maxContentHeight,this.calcBottom()-this.downPosition.fullBounds.top-this.position.verticalDiff));return t!==this.position.height?(this.assignStyle({height:t}),this.emit(e.EVENTS.CONTROL_BOTTOM_UPDATE,this),!0):!1}movePointLeft(){const t=this.minContentWidth+this.position.horizontalDiff,s=this.maxContentWidth+this.position.horizontalDiff,i=Math.min(Math.max(this.calcLeft(),this.downPosition.fullBounds.right-s),this.downPosition.fullBounds.right-t),u=this.downPosition.fullBounds.right-i-this.position.horizontalDiff;return i!==this.position.fullBounds.left?(this.assignStyle({width:u,left:i}),this.emit(e.EVENTS.CONTROL_LEFT_UPDATE,this),!0):!1}movePointTop(){const t=this.minContentHeight+this.position.verticalDiff,s=this.maxContentHeight+this.position.verticalDiff,i=Math.min(Math.max(this.calcTop(),this.downPosition.fullBounds.bottom-s),this.downPosition.fullBounds.bottom-t),u=this.downPosition.fullBounds.bottom-i-this.position.verticalDiff;return i!==this.position.fullBounds.top?(this.assignStyle({height:u,top:i}),this.emit(e.EVENTS.CONTROL_TOP_UPDATE,this),!0):!1}calcRight(){let t=this.parentMouseX-this.offsetX+this.downPosition.fullBounds.width;return t=t+this.snapThreshold>=this.parentPosition.actionBounds.right?this.parentPosition.actionBounds.right:t,t}calcBottom(){let t=this.parentMouseY-this.offsetY+this.downPosition.fullBounds.height;return t=t+this.snapThreshold>=this.parentPosition.actionBounds.bottom?this.parentPosition.actionBounds.bottom:t,t}calcLeft(){const t=this.parentMouseX-this.offsetX;return t-this.snapThreshold<=this.parentPosition.actionBounds.left?this.parentPosition.actionBounds.left:t}calcTop(){const t=this.parentMouseY-this.offsetY;return t-this.snapThreshold<=this.parentPosition.actionBounds.top?this.parentPosition.actionBounds.top:t}drag(){const t=this.calcLeft(),s=this.calcTop(),i=s+this.position.fullBounds.height+this.snapThreshold>=this.parentPosition.actionBounds.bottom?this.parentPosition.actionBounds.bottom-this.position.fullBounds.height:s,u=t+this.position.fullBounds.width+this.snapThreshold>=this.parentPosition.actionBounds.right?this.parentPosition.actionBounds.right-this.position.fullBounds.width:t;(this.position.fullBounds.left!==u||this.position.fullBounds.top!==i)&&(this.assignStyle({left:u,top:i}),this.element.setAttribute(e.ATTRIBUTES.DRAG,""),this.emit(e.EVENTS.DRAG,this))}};let v=e;h(v,"__ENGAGED_STACK__",[]),h(v,"ERROR",{NO_PARENT:"Element must have an offset parent with position relative)"}),h(v,"DEFAULTS",{snapThreshold:16,controlsThreshold:16,minContentHeight:50,minContentWidth:50,maxContentWidth:1/0,maxContentHeight:1/0,clickDetectionThreshold:5,stack:!1,excludePadding:!1}),h(v,"ATTRIBUTES",N),h(v,"CURSOR",_),h(v,"EVENTS",D),h(v,"activeInstance",null);const U=document.querySelectorAll(".overdrag");U.forEach(d=>{const g=function(){try{return JSON.parse(d.getAttribute("data-props")||"")}catch{return{}}}(),t=new v({element:d,...g});t.element.data=t.element.querySelector(".data"),t.on("update",B),B(t),t.on(v.EVENTS.CLICK,()=>console.log("click",t))});function B(d){d.element.data.innerHTML=`
    ${S("controls",d.controlsActive.toString())}
    ${S("dragging",d.dragging.toString())}
    ${S("over",d.over.toString())}
    ${S("down",d.down.toString())} 
    ${S("resizing",d.resizing.toString())} 
    ${S("top",d.position.visualBounds.top.toString())}
    ${S("left",d.position.visualBounds.left.toString())}  
    ${S("width",d.position.width.toString())}
    ${S("height",d.position.height.toString())}  
    ${S("control",d.element.getAttribute(v.ATTRIBUTES.CONTROLS)||"")}  
  `}function S(d,g){return`<div>${d}: ${g}</div>`}
