var C=Object.defineProperty;var L=(p,f,t)=>f in p?C(p,f,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[f]=t;var n=(p,f,t)=>(L(p,typeof f!="symbol"?f+"":f,t),t);(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const v of s.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&e(v)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function x(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var M={exports:{}};(function(p){var f=Object.prototype.hasOwnProperty,t="~";function e(){}Object.create&&(e.prototype=Object.create(null),new e().__proto__||(t=!1));function i(c,r,h){this.fn=c,this.context=r,this.once=h||!1}function s(c,r,h,a,T){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new i(h,a||c,T),d=t?t+r:r;return c._events[d]?c._events[d].fn?c._events[d]=[c._events[d],m]:c._events[d].push(m):(c._events[d]=m,c._eventsCount++),c}function v(c,r){--c._eventsCount===0?c._events=new e:delete c._events[r]}function u(){this._events=new e,this._eventsCount=0}u.prototype.eventNames=function(){var r=[],h,a;if(this._eventsCount===0)return r;for(a in h=this._events)f.call(h,a)&&r.push(t?a.slice(1):a);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(h)):r},u.prototype.listeners=function(r){var h=t?t+r:r,a=this._events[h];if(!a)return[];if(a.fn)return[a.fn];for(var T=0,m=a.length,d=new Array(m);T<m;T++)d[T]=a[T].fn;return d},u.prototype.listenerCount=function(r){var h=t?t+r:r,a=this._events[h];return a?a.fn?1:a.length:0},u.prototype.emit=function(r,h,a,T,m,d){var P=t?t+r:r;if(!this._events[P])return!1;var l=this._events[P],b=arguments.length,w,g;if(l.fn){switch(l.once&&this.removeListener(r,l.fn,void 0,!0),b){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,h),!0;case 3:return l.fn.call(l.context,h,a),!0;case 4:return l.fn.call(l.context,h,a,T),!0;case 5:return l.fn.call(l.context,h,a,T,m),!0;case 6:return l.fn.call(l.context,h,a,T,m,d),!0}for(g=1,w=new Array(b-1);g<b;g++)w[g-1]=arguments[g];l.fn.apply(l.context,w)}else{var A=l.length,R;for(g=0;g<A;g++)switch(l[g].once&&this.removeListener(r,l[g].fn,void 0,!0),b){case 1:l[g].fn.call(l[g].context);break;case 2:l[g].fn.call(l[g].context,h);break;case 3:l[g].fn.call(l[g].context,h,a);break;case 4:l[g].fn.call(l[g].context,h,a,T);break;default:if(!w)for(R=1,w=new Array(b-1);R<b;R++)w[R-1]=arguments[R];l[g].fn.apply(l[g].context,w)}}return!0},u.prototype.on=function(r,h,a){return s(this,r,h,a,!1)},u.prototype.once=function(r,h,a){return s(this,r,h,a,!0)},u.prototype.removeListener=function(r,h,a,T){var m=t?t+r:r;if(!this._events[m])return this;if(!h)return v(this,m),this;var d=this._events[m];if(d.fn)d.fn===h&&(!T||d.once)&&(!a||d.context===a)&&v(this,m);else{for(var P=0,l=[],b=d.length;P<b;P++)(d[P].fn!==h||T&&!d[P].once||a&&d[P].context!==a)&&l.push(d[P]);l.length?this._events[m]=l.length===1?l[0]:l:v(this,m)}return this},u.prototype.removeAllListeners=function(r){var h;return r?(h=t?t+r:r,this._events[h]&&v(this,h)):(this._events=new e,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,p.exports=u})(M);var I=M.exports;const _=x(I),o=class extends _{constructor({element:t,minContentHeight:e=o.DEFAULTS.minContentHeight,minContentWidth:i=o.DEFAULTS.minContentWidth,snapThreshold:s=o.DEFAULTS.snapThreshold,controlsThreshold:v=o.DEFAULTS.controlsThreshold,clickDetectionThreshold:u=o.DEFAULTS.clickDetectionThreshold,stack:c=!1}){super();n(this,"window",window);n(this,"element");n(this,"parentElement");n(this,"snapThreshold");n(this,"controlsThreshold");n(this,"minContentHeight");n(this,"minContentWidth");n(this,"clickDetectionThreshold");n(this,"engaged",!1);n(this,"controlsActive",!1);n(this,"over",!1);n(this,"dragging",!1);n(this,"resizing",!1);n(this,"down",!1);n(this,"parentMouseX",0);n(this,"parentMouseY",0);n(this,"offsetX",0);n(this,"offsetY",0);n(this,"position");n(this,"downPosition");n(this,"parentPosition");n(this,"computed",!1);n(this,"stack");n(this,"cursorSet",!1);n(this,"controls",{left:!1,right:!1,top:!1,bottom:!1});n(this,"downMouseX",0);n(this,"downMouseY",0);n(this,"onMouseOver",(t,e=!1)=>{var i;this.over||o.activeInstance&&o.activeInstance!==this||(!this.stack&&!e&&((i=o.__ENGAGED_STACK__.at(-1))==null||i.onMouseOut(t,!0),o.__ENGAGED_STACK__.push(this)),this.setOverState(!0),this.element.addEventListener("mouseleave",this.onMouseOut),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mousedown",this.onMouseDown))});n(this,"onMouseOut",(t,e=!1)=>{var i;this.over&&(this.element.removeEventListener("mouseleave",this.onMouseOut),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mousedown",this.onMouseDown),this.setOverState(!1),this.resetControlPoints(),!this.stack&&!e&&(o.__ENGAGED_STACK__.pop(),(i=o.__ENGAGED_STACK__.at(-1))==null||i.onMouseOver(t,!0)))});n(this,"onMouseDown",t=>{t.preventDefault(),this.element.removeEventListener("mouseleave",this.onMouseOut),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("mouseenter",this.onMouseOver),this.down=!0,o.activeInstance=this,this.downPosition={box:{...this.position.box},fullBox:{...this.position.fullBox},rect:{...this.position.rect},borders:{...this.position.borders},margins:{...this.position.margins},paddings:{...this.position.paddings},visualBox:{...this.position.visualBox}},this.offsetX=this.parentMouseX-this.position.rect.left,this.offsetY=this.parentMouseY-this.position.rect.top,this.downMouseX=this.parentMouseX,this.downMouseY=this.parentMouseY,this.dragging=!this.controlsActive,this.resizing=this.controlsActive,this.element.setAttribute(o.ATTRIBUTES.DOWN,""),this.dragging&&this.element.setAttribute(o.ATTRIBUTES.DRAG,""),this.emit(o.EVENTS.DOWN,this),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseup",this.onMouseUp)});n(this,"onMouseUp",t=>{this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mouseleave",this.onMouseOut),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mousedown",this.onMouseDown),this.element.addEventListener("mouseenter",this.onMouseOver),this.down=!1,t.preventDefault(),o.activeInstance=null,this.down=!1,this.dragging=!1,this.element.removeAttribute(o.ATTRIBUTES.DOWN),this.element.removeAttribute(o.ATTRIBUTES.DRAG),this.element.removeAttribute(o.ATTRIBUTES.RESIZE),this.emit(o.EVENTS.UP,this),this.isClick()&&this.emit(o.EVENTS.CLICK,this)});n(this,"onMouseMove",t=>{this.parentPosition=this.getComputedParentPosition(),this.position=this.getComputedElementPosition(),this.parentMouseX=t.pageX-this.parentPosition.offsetLeft,this.parentMouseY=t.pageY-this.parentPosition.offsetTop,this.down?this.dragging?this.drag():this.reSize():(this.updateControlPointsState(),this.updateCursorStyle())});if(this.minContentHeight=e,this.minContentWidth=i,this.snapThreshold=s,this.controlsThreshold=v,this.element=t,this.stack=c,this.element.__overdrag=this,this.clickDetectionThreshold=u,!this.element.offsetParent)throw new Error(o.ERROR.NO_PARENT);this.parentElement=this.element.offsetParent,this.element.addEventListener("mouseenter",this.onMouseOver),this.parentPosition=this.getComputedParentPosition(),this.position=this.getComputedElementPosition(),this.downPosition=this.position}_getInt(t){return parseInt(t||"0")}emit(t,...e){return super.emit.apply(this,[o.EVENTS.UPDATE,this]),super.emit.apply(this,[t,...e])}getComputedParentPosition(){const t=this.parentElement.getBoundingClientRect(),e=getComputedStyle(this.parentElement),i={top:this._getInt(e.paddingTop),right:this._getInt(e.paddingRight),bottom:this._getInt(e.paddingBottom),left:this._getInt(e.paddingLeft)};return{box:{width:this._getInt(e.width),height:this._getInt(e.height)},paddings:i,offsetLeft:t.left+this._getInt(e.borderLeftWidth)+i.left,offsetTop:t.top+this._getInt(e.borderTopWidth)+i.top}}getComputedElementPosition(){const t=getComputedStyle(this.element),e={top:this._getInt(t.marginTop),right:this._getInt(t.marginRight),bottom:this._getInt(t.marginBottom),left:this._getInt(t.marginLeft)},i={top:this._getInt(t.borderTopWidth),right:this._getInt(t.borderRightWidth),bottom:this._getInt(t.borderBottomWidth),left:this._getInt(t.borderLeftWidth)},s={top:this._getInt(t.paddingTop),right:this._getInt(t.paddingRight),bottom:this._getInt(t.paddingBottom),left:this._getInt(t.paddingLeft)},v=this._getInt(t.top),u=this._getInt(t.left),c=this._getInt(t.width),r=this._getInt(t.height),h=c+i.right+i.left+s.right+s.left+e.right+e.left,a=r+i.top+i.bottom+s.top+s.bottom+e.top+e.bottom;return{rect:{top:v,left:u,right:u+h,bottom:v+a},box:{width:c,height:r},visualBox:{width:c+i.right+i.left+s.right+s.left,height:r+i.top+i.bottom+s.top+s.bottom},fullBox:{width:h,height:a},margins:e,borders:i,paddings:s}}isClick(){return Math.abs(this.parentMouseX-this.downMouseX)<this.clickDetectionThreshold&&Math.abs(this.parentMouseY-this.downMouseY)<this.clickDetectionThreshold}isControlPointActive(){return this.over&&(this.controls.left||this.controls.right||this.controls.top||this.controls.bottom)}setOverState(t){this.over=t,t?(this.element.setAttribute(o.ATTRIBUTES.OVER,""),this.emit(o.EVENTS.OVER,this)):(this.element.removeAttribute(o.ATTRIBUTES.OVER),this.emit(o.EVENTS.OUT,this))}resetControlPoints(){const t=this.controlsActive;this.controlsActive=this.controls.left=this.controls.right=this.controls.top=this.controls.bottom=!1,t!==this.controlsActive&&(this.element.removeAttribute(o.ATTRIBUTES.CONTROLS),this.emit(o.EVENTS.CONTROLS_INACTIVE,this))}updateControlPointsState(){const t=JSON.stringify(this.controls);this.controls.left=Math.abs(this.parentMouseX-this.position.rect.left-this.position.margins.left+this.parentPosition.paddings.left)<=this.controlsThreshold,this.controls.right=Math.abs(this.parentMouseX-this.position.rect.right+this.position.margins.right+this.parentPosition.paddings.left)<=this.controlsThreshold,this.controls.top=Math.abs(this.parentMouseY-this.position.rect.top-this.position.margins.top+this.parentPosition.paddings.top)<=this.controlsThreshold,this.controls.bottom=Math.abs(this.parentMouseY-this.position.rect.bottom+this.position.margins.bottom+this.parentPosition.paddings.top)<=this.controlsThreshold;const e=this.controls.left||this.controls.right||this.controls.top||this.controls.bottom;e&&t!==JSON.stringify(this.controls)?(this.controlsActive=!0,this.element.setAttribute(o.ATTRIBUTES.CONTROLS,Object.keys(this.controls).filter(i=>this.controls[i]).join("-")),this.emit(o.EVENTS.CONTROLS_ACTIVE,this)):e||this.resetControlPoints()}updateCursorStyle(){let t=null;this.controls.top&&this.controls.left?t=o.CURSOR.TOP_LEFT:this.controls.bottom&&this.controls.right?t=o.CURSOR.BOTTOM_RIGHT:this.controls.bottom&&this.controls.left?t=o.CURSOR.BOTTOM_LEFT:this.controls.top&&this.controls.right?t=o.CURSOR.TOP_RIGHT:this.controls.top?t=o.CURSOR.TOP:this.controls.bottom?t=o.CURSOR.BOTTOM:this.controls.left?t=o.CURSOR.LEFT:this.controls.right?t=o.CURSOR.RIGHT:this.over&&(t=o.CURSOR.OVER),this.element.style.setProperty("cursor",t)}reSize(){let t=!1;this.controls.top&&(t=this.movePointTop()||t),this.controls.bottom&&(t=this.movePointBottom()||t),this.controls.left&&(t=this.movePointLeft()||t),this.controls.right&&(t=this.movePointRight()||t),t&&(this.emit(o.EVENTS.RESIZE,this),this.element.setAttribute(o.ATTRIBUTES.RESIZE,Object.keys(this.controls).filter(e=>this.controls[e]).join("-")))}assignPosition(t){const e={top:this.position.rect.top,left:this.position.rect.left,width:this.position.box.width,height:this.position.box.height,...t};this.position={...this.position,rect:{...this.position.rect,top:e.top,left:e.left},box:{...this.position.box,width:e.width,height:e.height}},this.element.style.left=`${e.left}px`,this.element.style.top=`${e.top}px`,this.element.style.width=`${e.width}px`,this.element.style.height=`${e.height}px`,this.element.setAttribute("width",`${e.width}`),this.element.setAttribute("height",`${e.height}`)}movePointRight(){const t=this.parentPosition.box.width-this.position.rect.left+this.parentPosition.paddings.right,e=this.position.fullBox.width-this.position.box.width,i=this.minContentWidth+e;let s=Math.max(i,Math.min(this.parentMouseX-this.downPosition.rect.left+(this.downPosition.fullBox.width-this.offsetX),t));return s=s>=t-this.snapThreshold?t:s,s=s-e,s!==this.position.box.width?(this.assignPosition({width:s}),this.emit(o.EVENTS.CONTROL_RIGHT_UPDATE,this),!0):!1}movePointBottom(){const t=this.parentPosition.box.height-this.position.rect.top+this.parentPosition.paddings.bottom,e=this.position.fullBox.height-this.position.box.height,i=this.minContentHeight+e;let s=Math.max(i,Math.min(this.parentMouseY-this.downPosition.rect.top+(this.downPosition.fullBox.height-this.offsetY),t));return s=s>=t-this.snapThreshold?t:s,s=s-e,s!==this.position.box.height?(this.assignPosition({height:s}),this.emit(o.EVENTS.CONTROL_BOTTOM_UPDATE,this),!0):!1}movePointLeft(){const t=this.position.fullBox.width-this.position.box.width,e=this.minContentWidth+t;let i=Math.max(this.parentPosition.paddings.left,Math.min(this.parentMouseX-this.offsetX,this.downPosition.rect.right-e));i=i<this.snapThreshold+this.parentPosition.paddings.left?this.parentPosition.paddings.left:i;const s=Math.max(e,this.downPosition.rect.right-i)-t;return i!==this.position.rect.left?(this.assignPosition({width:s,left:i}),this.emit(o.EVENTS.CONTROL_LEFT_UPDATE,this),!0):!1}movePointTop(){const t=this.position.fullBox.height-this.position.box.height,e=this.minContentHeight+t;let i=Math.max(this.parentPosition.paddings.top,Math.min(this.parentMouseY-this.offsetY,this.downPosition.rect.bottom-e));i=i<this.snapThreshold+this.parentPosition.paddings.top?this.parentPosition.paddings.top:i;const s=Math.max(e,this.downPosition.rect.bottom-i)-t;return i!==this.position.rect.top?(this.assignPosition({height:s,top:i}),this.emit(o.EVENTS.CONTROL_TOP_UPDATE,this),!0):!1}drag(){let t=this.parentMouseX-this.offsetX,e=this.parentMouseY-this.offsetY;t=t<=this.snapThreshold+this.parentPosition.paddings.left?this.parentPosition.paddings.left:t+this.position.fullBox.width>=this.parentPosition.paddings.left+this.parentPosition.box.width-this.snapThreshold?this.parentPosition.paddings.left+this.parentPosition.box.width-this.position.fullBox.width:t,e=e<=this.snapThreshold+this.parentPosition.paddings.top?this.parentPosition.paddings.top:e+this.position.fullBox.height>=this.parentPosition.paddings.top+this.parentPosition.box.height-this.snapThreshold?this.parentPosition.paddings.top+this.parentPosition.box.height-this.position.fullBox.height:e,(this.position.rect.right!==t||this.position.rect.top!==e)&&(this.assignPosition({left:t,top:e}),this.element.setAttribute(o.ATTRIBUTES.DRAG,""),this.emit(o.EVENTS.DRAG,this))}};let E=o;n(E,"__ENGAGED_STACK__",[]),n(E,"ERROR",{NO_PARENT:"Element must have an offset parent with position relative or absolute)"}),n(E,"DEFAULTS",{snapThreshold:16,controlsThreshold:16,minContentHeight:50,minContentWidth:50,clickDetectionThreshold:5}),n(E,"ATTRIBUTES",{CONTROLS:"data-overdrag-controls",OVER:"data-overdrag-over",DOWN:"data-overdrag-down",DRAG:"data-overdrag-drag",RESIZE:"data-overdrag-resize"}),n(E,"CURSOR",{LEFT:"w-resize",RIGHT:"e-resize",TOP:"n-resize",BOTTOM:"s-resize",TOP_LEFT:"nw-resize",TOP_RIGHT:"ne-resize",BOTTOM_LEFT:"sw-resize",BOTTOM_RIGHT:"se-resize",OVER:"grab",DEFAULT:"default"}),n(E,"EVENTS",{DOWN:"down",UP:"up",CLICK:"click",DRAG:"drag",OVER:"over",OUT:"out",CONTROLS_ACTIVE:"controls-active",CONTROLS_INACTIVE:"controls-inactive",CONTROL_RIGHT_UPDATE:"control-right-update",CONTROL_LEFT_UPDATE:"control-left-update",CONTROL_TOP_UPDATE:"control-top-update",CONTROL_BOTTOM_UPDATE:"control-bottom-update",RESIZE:"resize",UPDATE:"update"}),n(E,"activeInstance",null);const y=document.querySelectorAll(".overdrag");y.forEach(p=>{const f=new E({element:p});f.element.data=f.element.querySelector(".data"),f.on("update",S),S(f),f.on(E.EVENTS.CLICK,()=>console.log("click",f))});function S(p){p.element.data.innerHTML=`
    ${O("controls",p.controlsActive.toString())}
    ${O("dragging",p.dragging.toString())}
    ${O("over",p.over.toString())}
    ${O("down",p.down.toString())} 
    ${O("resizing",p.resizing.toString())} 
    ${O("top",p.position.rect.top.toString())}
    ${O("left",p.position.rect.left.toString())}  
    ${O("width",p.position.box.width.toString())}
    ${O("height",p.position.box.height.toString())}  
    ${O("control",p.element.getAttribute(E.ATTRIBUTES.CONTROLS)||"")}  
  `}function O(p,f){return`<div>${p}: ${f}</div>`}
